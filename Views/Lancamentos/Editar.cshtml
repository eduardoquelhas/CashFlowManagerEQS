@model CashFlowManagerEQS.Models.Lancamento

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<h2>Editar Lançamento</h2>

<form asp-action="Editar" method="post">
    <input type="hidden" asp-for="Id" />
    <div class="form-group">
        <label asp-for="Descricao" class="control-label"></label>
        <input asp-for="Descricao" class="form-control" />
        <span asp-validation-for="Descricao" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Valor" class="control-label"></label>
        <input asp-for="Valor" class="form-control" />
        <span asp-validation-for="Valor" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Tipo" class="control-label"></label>
        <select asp-for="Tipo" class="form-control">
            <option value="Crédito">Crédito</option>
            <option value="Débito">Débito</option>
        </select>
        <span asp-validation-for="Tipo" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Data" class="control-label"></label>
        <input asp-for="Data" class="form-control" type="date" />
        <span asp-validation-for="Data" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary">Atualizar</button>
</form>

<!-- Adicionar o JavaScript para capturar o evento de clique -->
<script>
    document.getElementById('btn-update').addEventListener('click', function(event) {
        event.preventDefault(); // Impede o envio imediato do formulário

        var id = '@ViewBag.Id'; // Obtém o valor de id da ViewBag
        var form = document.getElementById('edit-form'); // O formulário

        // Usar SweetAlert para exibir o popup
        Swal.fire({
            title: 'Confirmação',
            text: 'O valor do ID é: ' + id + '. Deseja continuar?',
            icon: 'info',
            showCancelButton: true,
            confirmButtonText: 'Sim, continuar',
            cancelButtonText: 'Cancelar'
        }).then((result) => {
            if (result.isConfirmed) {
                // Se o usuário confirmar, submeter o formulário
                form.submit();
            }
        });
    });
</script>